<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <title>ことせかい Version 1.* から Version 2.0.0 への変更点</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <section id="main_content">
<h3 id="Changelog">ことせかい Version 1.* から Version 2.0.0 への変更点</h3>
<div>
ことせかい の Version 1.* から Version 2.0.0 へアップデートされて変わったことについて解説します。
</div>
<div>
<hr/>
目次
<ul>
	<li><a href="#Introduction">はじめに</a></li>
	<li><a href="#Bookshelf">本棚画面の変更点</a></li>
	<li><a href="#NovelDetail">小説の詳細画面</a></li>
	<li><a href="#WebSearch">Web検索画面</a></li>
	<li><a href="#WebImport">Web取込画面の変更点</a></li>
	<li><a href="#Download">小説のダウンロードの仕組みについて</a></li>
	<li><a href="#TutorialDoc">初回起動時に「はじめに(ことせかい の使い方)」という文書がダウンロードされるようになります</a></li>
	<li><a href="#iCloudSync">iCloud同期 が追加されました</a></li>
</ul>
</div>
<hr/>
<h4 id="Introduction">はじめに</h4>
<div>
ことせかい をご利用いただきありがとうございます。
ことせかい は Version 2.0.0 でほとんど全てのプログラムコードを書き直されました。ただ、画面表示についてはできるだけ変更せずに行われましたため、ひと目見ただけでは変更点を確認できないかもしれません。そこで、この文書では Version 1.* から Version 2.0.0 へアップデートされることで変化する事について解説致します。</div>
<div>なお、Version 2.0.0 では 特別な理由が無い限りは Version 1.* でできていた事はそのままできるように実装しようとしていますので、恐らくはあまり変わらない使用感を維持できていると考えています。
</div><div>
以下にざっくりとですが解説していきます。
といっても、それでも結構な分量になってしまいました。
Version 2.0.0 へのデータ移行が完了した直後は Version 1.* での設定が引き継がれておりますので、恐らくはそのまま利用される分には特に支障もなく利用できると思います。そのため、最初はざっと斜め読みした上で気が向いた時にでも読み返すなどの使い方をされても良いかもしれません。
</div>
<h4 id="Bookshelf">本棚画面の変更点</h4>
<div>本棚画面では以下のような変更点があります。
<dl>
	<dt>小説を「お気に入り」登録できるようになりました</dt>
	<dd>小説名の左側に星型のマークが表示されており、その星型のマークの辺り(正確には小説名の左側の正方形のボタン)をタップする事で「お気に入り」状態のON/OFFができるようになりました。「お気に入り」状態にされた小説は更新チェック時に優先的に確認されるようになったり、削除することができなくなったりします。</dd><br>
	<dt>右上の「順番」で選択できる要素が増えました</dt>
	<dd>順番では、「作者名順」のような、項目ごとに分類された状態での表示をサポートしました。この項目ごとの分類では、自作のフォルダを作ってそのフォルダに小説を登録する形での自作フォルダの概念も導入しています。自作フォルダについては「設定タブ」→「自作フォルダを編集する」などを使って管理していただくような形(小説の詳細ページからも編集出来ないことはありませんが)になっています。他にもいくつかの「順番の項目」を用意しておりますので触ってみてください。</dd><br>
</dl>
</div>
<h4 id="NovelDetail">小説の詳細画面</h4>
<div>小説本文を表示している画面の右上に表示される「詳細」ボタンの内容が変更されました。
この「小説の詳細画面」では、その小説の概要の参照、その小説に対しての操作、その小説専用の設定ができるようになっています。
小説専用の設定では、例えば発話時の話者などを変更したり、読みの修正を登録できるようになっています。
そのため、その小説での固有名詞などで特殊な読みをするものを全体への読み替え設定として登録してしまうと誤った発話が多くなってしまうような読み替え設定をその小説に限定して設定できるようになったり、お子様への読み聞かせをする小説では読み上げ速度が遅い話者を選択するようにしたりというような事ができるようになりました。
</div>
<h4 id="WebSearch">Web検索画面</h4>
<div>以前から告知しておりましたとおり、「なろう検索」タブは削除致しました。その代わりといっては何ですが、「Web検索」タブを導入しています。
「Web検索」タブは個々のWebサイト様の検索システムを、iOS側のボタンやテキストボックスとして表示するような形で提供できるようにしようとした物です。
Version 2.0.0 のリリース時点でいくつかの Webサイト様 での検索を提供しようとしており、「検索先のWebサイト」をタップしてWebサイト名を選択することでそれぞれのWebサイト様での検索を利用できるようになっています。
ただ、この仕組はWebサイト様側の仕様が少しでも変わりますと途端に動かなくなるような仕組みになっておりますので、あまり過度の期待はしないでご利用下さい。(といいますか、恐らくは結構な頻度で検索がうまく動かなくなったりしそうな気がしますので、そのような事が起こっておりましたら、おちついて、やさしく、ていねいに、教えて頂けますと幸いです。
</div>
<h4 id="WebImport">Web取込画面の変更点</h4>
<div>Web取込画面はほとんど変更点がありません。ただし、HTTP Cookie の取り扱いだけは少し変更されました。
ことせかい で利用される HTTP Cookie はこのWeb取込画面で設定された物を基準とするようになります。
具体的には、Version 1.* から Version 2.* にデータを移行した後、場合によると Web取込画面 で再度ログインの手続きをとったり、18歳以上かどうかの確認ページで「18歳以上です」といったボタンを押し直す、という手続きを行わないとダウンロードができなくなったりします。
また、Safari からの取り込みを行った時にも Safari側 のログイン状態などを引き継ぎにくくなりますので、ダウンロードについては「Web取込」画面から行う事が推奨される事になりました。
</div>
<h4 id="Settings">「設定タブ」の変更点</h4>
<div>「設定タブ」の変更点は結構色々ありますのでざっくりと箇条書きにしていきます。
<dl>
	<dt>「お知らせ」は「開発者からのお知らせ」に変更されました</dt><br>
	<dt>「アプリ内エラーのお知らせ」が増えました</dt>
	<dd>アプリ内で修正不能なエラーが出た時にはここで告知されるようになりました。例えば、他の端末で設定されていた話者がこちらの端末では使えなかったため、別の話者を使用した、といった場合にエラーとして報告されます。</dd><br>
	<dt>「声質の設定」は「発話設定」と「発話変更設定」に分離されました</dt>
	<dd>Version 1.* までは「声質の設定」で発話する時の話者と通常の文や会話文での声の高さを変更していましたが、Version 2.0.0 からは「発話設定」で「話者、声の高さ、速度」を設定した物を「話者」として複数登録して、その登録された話者を「発話変更設定」で本文や会話文へと割り当てる、という形になります。これをできるようにしたことで、本文は女性(O-ren)で、会話文は男性(Hattori)に読み上げてもらったり、会話文だけは速度を早くしたりする、というような事ができるようになります。また、「発話設定」で「言語」を日本語(ja-JP)から別の言語にすることで、英語など他の言語の話者を選択できるようになりました。また、小説毎の設定として話者を変更することもできますので、英語の内容を読み込んで、英語話者に読み上げてもらったりすることもできるようになっています。</dd><br>
	<dt>「本文中の長押しメニューを「読み替え辞書へ登録」のみにする」が「本文中の長押しメニューを ことせかい 由来の物のみにする」に変更されました</dt>
	<dd>これは、小説本文画面で本文を長押しした時に出てくるメニューの ことせかい 由来の物が「読み替え登録」「読み替え登録(この小説用)」「読み替え後を確認」の3つに増えたために表記を変えたという物になります。</dd><br>
	<dt>「再生が末尾に達した時の動作」に項目が増えました</dt>
	<dd>「お気に入りのうち未読の物を再生」と「同じフォルダの小説のうち未読の物を再生」が追加されました。「お気に入りのうち未読の物を再生」が選択されている時は、小説を読み上げ終えた時に「お気に入り」に登録されている別の小説のうち、読み終わっていない小説に切り替えて読み上げを再開します。同様に、「同じフォルダの小説のうち未読の物を再生」が選択されている場合は、読み上げが終わった小説が登録されている「自作フォルダ」と同じ「自作フォルダ」に登録されている小説のうち、読み終わっていない小説に切り替えて読み上げを再開するという動作になります。</dd><br>
	<dt>「テキスト分割文字列の設定」が追加されました。</dt>
	<dd>小説を取り込もうとした時に、次のページへのリンクが発見出来なかった場合に、ここで指定された文字列を使ってページを分割した状態で読み込むように促すことができるようになりました。</dd><br>
	<dt>「自作フォルダを編集する」が追加されました。</dt>
	<dd>「本棚画面」で「順番」を「自作フォルダ順」にしている時に表示されるフォルダの作成・削除、それらフォルダへの小説の登録・登録解除、フォルダ内で表示される順番、「設定タブ」→「再生が末尾に達した時の動作」で「同じフォルダの小説のうち未読の物を再生」が選択されている時に次の小説として読み上げられる小説の選択される順番を設定できます。</dd><br>
	<dt>「お気に入り順を編集する」が追加されました。</dt>
	<dd>「本棚画面」で「順番」を「お気に入り順」にしている時に表示される小説の順番と、「設定タブ」→「再生が末尾に達した時の動作」で「お気に入りのうち未読の物を再生」が選択されている時に次の小説として読み上げられる小説の選択される順番を設定できます。</dd><br>
	<dt>「iCloud同期を使用する」のON/OFFが追加されました。</dt>
	<dd>こちらについては下記<a href="iCloud">iCloud同期</a>にて詳しく解説致します。</dd><br>
	<dt>「内部データ参照用URLの設定」が追加されました。</dt>
	<dd>こちらは(少なくともVersion 2.0.0 がリリースされた直後は)ほとんどの方には関係のない項目となりますので省略します。</dd><br>
	<dt>「小説本文画面の右上に表示されるボタン群の編集」ボタンが追加されました。</dt>
	<dd>こちらは、「小説本文画面」の右上に出ているボタンの追加や削除、順番の入れ替えができるようになっています。標準では表示されないボタンも追加されていますので、便利に利用してください。</dd><br>
	<dt>「本棚画面の右上に表示されるボタン群の編集」ボタンが追加されました。</dt>
	<dd>こちらは、「本棚画面」の右上に出ているボタンの追加や削除、順番の入れ替えができるようになっています。そのうち標準では表示されないボタンも追加していくかもしれません。</dd><br>
	<dt>「標準の読みの修正と同じものを読み替え辞書登録から削除」ボタンが追加されました。</dt>
	<dd>これなのですけれど、何か動作が変なのであまり使わないでください……(´・ω・`)</dd><br>
</dl>
</div>
<h4 id="Download">小説のダウンロードの仕組みについて</h4>
<div>Version 2.0.0 では小説のダウンロードの仕組みがほぼ全て書き直されました。大まかな変更点は以下の通りです。
<dl>
	<dt>別のWebサイト様であれば、最大で5並列でダウンロードを試みるようになりました</dt>
	<dd>複数のWebサイト様からの小説が本棚に登録されている場合、それら別のWebサイト様毎に1つづつ、最大で5並列でダウンロードを試みるようになりました。これにより、複数のWebサイト様からの小説が本棚に登録されている場合には以前よりも早めに更新確認が終わる可能性があります。</dd><br>
	<dt>JavaScriptが動作しないと本文を取り出せないようなWebサイト様でもダウンロードができるようになりました</dt>
	<dd>ダウンロード中にWebブラウザを内部で起動することにより、JavaScriptが動作しないと本文が表示されないようなWebサイト様でも本文をダウンロードできるように変更されました。ただし、内部でWebブラウザを起動して動作するようになるため、通常のダウンロードよりも遅い動作になります。なお、pixiv小説様については現時点(2021/01/31現在)ではダウンロード出来ることを確認しているのですが、ここ数ヶ月観測していた範囲では、最大で一月に2回程の頻度でWebページの構造が変化してダウンロードができなくなっておりましたので、思いの外簡単にダウンロードできなくなりそうな気がしています。その場合はおちついて、やさしく、教えて頂けますと幸いです。</dd><br>
	<dt>HTTP Cookie の取り扱いが変わりました</dt>
	<dd>HTTP Cookie については前述の<a href="#WebImport">Web取込</a>の部分で解説しておりますのでそちらをご参照下さい。</dd><br>
</dl>
</div>
<h4 id="TutorialDoc">初回起動時に「はじめに(ことせかい の使い方)」という文書がダウンロードされるようになります</h4>
<div>ことせかい は利用を開始した時にチュートリアルなどは用意しておりませんため、使い方がよくわからないという方がおられそうでした。そのため、初回起動時に ことせかい の使い方の書かれた文書(小説)をダウンロードすることで、その小説が目に入り、それを開くことで使い方が表示されるような形で、ことせかい の使い方を把握する一助になるような物を目指して書いています。
<a href="topics/jp/index.html">この文書</a>は、Version 1.* から Version 2.0.0 へとアップデートされた時にもダウンロードされます。
今まで ことせかい を使っていた方にはわかりきった話も書かれているかもしれませんが、Version 2.0.0 時点での使い方をだいたい把握したい、という方には良いかもしれない、という内容にもなっていそうですのでお暇な時にでもご参照下さい。
</div><br>
<h4 id="iCloudSync">iCloud同期 が追加されました</h4>
<div>「設定タブ」→「iCloud 同期を使用する」をONにする事で利用できます。
複数の iOS(または iPadOS) の端末で、同じ iCloud アカウントにサインインした状態で、この「iCloud 同期を使用する」をONに致しますと、一つの端末で変更された内容が別の端末に同期されるようになります。
つまり、出先ではiPhoneを使って小説を聞いていたけれど、家に帰ってきた後は iPad を使って続きを確認したい、というような時に、読み上げ位置が iCloud経由 で同期されるという形になります。
iCloud同期につきましては、「はじめに(ことせかい の使い方)」の中の<a href="topics/jp/00008.html">iCloud同期 の章</a>で詳しく解説しておりますのでそちらをご参照下さい。
</div><br>
<div>以上となります。この文書が Version 2.0.0 での疑問点を解決する一助になる事を願っています。
</div>
        <footer>
	  <a href="./">Top</a><br>
          ことせかい is maintained by <a href="https://github.com/limura">limura</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>
      </div>
    </div>
